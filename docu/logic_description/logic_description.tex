\documentclass{article}

\begin{document}

\begin{titlepage}

\author{Gennadi Heimann} 
\title{Generischer Konfigurator} 
\date{29.12.2017} 
\maketitle
\end{titlepage}

\section{Logik Beschreibung}

Die Abh\"angigkeiten im Konfigurator bilden die Regel. Jede Komponente hat eine
Ausgangsabh\"angigket (outDependency) und eine Eingangsabh\"angigket
(inDependency). Die Ausgangsabh\"angigket bewirkt auf ihre Komponente mit der
Regel die in der Abh\"angigkeit hintergelegt ist. 
Es gibt zwei Arten (dependencyType) von Abh\"angigkeiten $<exclude>$ und
$<require>$. Die $<exclude>$ Abh\"angigkeit schlie\ss{}t die Komponente aus der
Konfiguration aus. Die $<require>$ Abh\"angigkeit fordert wiederum, dass die
Komponente in die KOnfiguration hinzugef\"ugt werden muss. Das Verhalten der
Abh\"ngigkeiten wird von Parameter $<visualization>$ gesteuert. Der Benutzer
des Konfigurators w\"ahlt die Komponente innerhalb eines Schrittes und die
Logik das Konfigurators pr\"uft die Abh\"angigkeiten und anhand der Parameter
wird weitere Verlauf gesteuert. In der darauffolgende Beschreibung werden
einzelne Parameter erkl\"art.

\begin{itemize} 
    \item visualization bei der $<exclude>$ Komponenten
    \begin{itemize}
        \item auto 
        \begin{itemize}
            \item Die Komponente wird automatisch aus der Konfiguration
            entfernt.Wenn die ausgeschlossene Komponente weiter auf
            eine $<exclude>$ Komponente verwei\ss{}t, werden diese Komponente 
            recursive ausgeschlossen. Das 
            bedeutet, dass bei der sp\"aterem Verlauf werden diese
            Komponente nicht gezeigt. Bei der $<require>$ Komponenten
            wird dieses Vorgehen nicht angewendet. Die Komponente wird nicht aus der 
            Konfiguration entfernt.
        \end{itemize}
        \item marked + selectable
        \begin{itemize}
            \item Die IN-Komponente wird visual merkiert, dass sie
            $<exclude>$ Komponente ist und der Benutzer hat die
            M\"oglichkeit diese Komponente auszuw\"ahlen.
            Wenn der Benutzer w\"ählt diese Komponente aus, wird ein
            Hinweis dem Benutzer vorgeschlagen, wie er die Abh\"angigkeiten
            in seiner Konfiguration l\"osen kann. Es wird eine andere
            OUT-Komponente aus dem gleichem Schritt vorgeschlagen. Wenn in
            diesem Schritt keinen Vorschlag gemacht werden kann wird weiter
            in dem übergeordneten Schritt weiter gesucht. Bei jedem
            vorgeschlagenen Komponente wird weiterhin nach Abh\"angigkeiten
            gepr\"ft.
        \end{itemize}
        \item marked + unselectable
        \begin{itemize}
            \item Die Komponente wird visuel markiert aber kann nicht
            ausgew\"ahlt werden. Die Abh\"angigkeiten werden gleich wie bei der
            Visualizationparameter $<auto>$ behandelt.
        \end{itemize}
    \end{itemize}
    \item require
    \begin{itemize}
        \item auto
        \begin{itemize}
          \item Die Komponente wird automatisch in die Konfiguration hinzugef\"ugt.
          Es wird gepr\"uft, ob der IN-Komponente der Abh\"angigkeit weitere
          $<require>$ oder $<exclude>$ Komponente hat. Wenn ja, wird gem\"a\ss{} der
          Parameter in der Abh\"angigkeit die Konfiguration angepasst. Wenn die
          IN-Koponente über mehrere Schritt in der Konfiguration entfernt ist. Der
          Konfigurator wird, dann in Laufe der Konfiguration bei jedem Schritt dem
          Benutzer einen Hinweis geben, welche Komponente der Benutzer ausw\"ahlen
          kann/muss um zu dem Schritt mit der $<require>$ Komponente zu kommen. Die
          Komponente wird visual markiert, dass sie schon zu der Konfiguration
          hinzugefugt wurde. Diese Komponente ist auch $<unselectable>$. Bei der
          Abh\"angigkeit in gleichem Schritt wird die Komponente ohne jegliche
          Hinweise zu der Konfiguration hinzugef\"ugt und dementsprechend markiert.
        \end{itemize}
    
        \item selectable
    
        \begin{itemize}
            \item Bevor die Komponente zu der Konfiguration hinzugef\"ugt wird, wird
            dem Benutzer einen Hinweis mit dem Auswahl gegeben. Der Benutzer kann
            entscheiden ob er die required Komponente zu der Konfiguration
            hinzuf\"ugen will.
        \end{itemize}
    \end{itemize}
\end{itemize}

Die aktuelle Konfiguration beh\"alt die gesamte Information (Abh\"angigkeiten)
von der hinzugef\"ugten Komponente. Diese Information hilft dem Konfigurator die
Pr\"ufungen durchf\"uhren, wenn der Web-Client Fehler macht. Zum Beispiel, wenn
der Web-Client dem Benutzer eine Komponente auszuw\"ahlen erlaubt, die von
Server als $<unselecteble>$ oder $<remove>$ markiert wurde. In diesem Fall
bekommt der Benutzer die Fehlermeldung.

\subsection{Auswahlkriterium}

Die Anzahl der Komponente die innerhalb eines Schrittes ausgew\"ahlt werden
können, werden über den Parameter $<SelectionCriterum>$ gesteuert. Dieses
Kriterium definiert für jeden Schritt die maximale und minimale Anzahl der
Komponente, die von dem Benutzer ausge\"ahlt werden k\"onnen. Das Auswahlkriterium 
wird nach demPr\"ufung der Abh\"angigkeiten durchgeführt. Es werden follgende F\"alle
unterschieden:\\\\

\begin{itemize}
    \item RequireComponent 
    \begin{itemize}
        \item Wenn die Anzahl der ausgew\"ahlten Komponente kleiner als minimale
        Kriterium. Der Benutzer wird aufgefordert weiter Komponente
        auszuw\"ahlen, bis minimale Kriterium erreicht wird.\\
        \textbf{min $>$ countOfComponents}
    \end{itemize}
    \item RequireNextStep
        \begin{itemize}
            \item Wenn alle Komponente in dem Schritt ausgew\"ahlt sind, wird
            der Konfigurator zu dem n\"achstem Schritt f\"uhren.\\
            \textbf{max == countOfComponents}\\
            Wenn der minimale Kriterium gleich Null und maximale Kriterium
            gr\"o\ss{}er Eins ist, kann der Benutzer ohne den Auswahl der
            Komponente zu dem n\"achsten wechseln.\\
            \textbf{min == 0 and max $>$ 1} ist nicht erlaubt\\
            \textbf{min == 0 and max == 0} ist nicht erlaubt.
        \end{itemize}
    \item AllowNextComponent
    \begin{itemize}
        \item  Wenn dem Benutzer noch weitere Komponente auszuw\"ahlen erlaubt.
        In diesem Fall kann der Benutzer weitere Komponente auszuwahlen oder zu
        dem n\"achstem Schritt wechseln.\\
        \textbf{min $<=$ countOfComponents and\\ max $>$ countOfComponents}
    \end{itemize}
\item ExcludeComponent
    \begin{itemize}
        \item Wenn der Benutzer mehr Komponente als erlaubt ausw\"ahlen
        möchte.\\
        \textbf{max $<$ countOfComponents}
    \end{itemize}
\end{itemize}

\noindent\textbf{$<$countOfComponents$>$} = Anzahl der vorher
ausgew\"ahlten Komponenten.
Die Anzahl der Komponenten wird aus der aktuellen Konfiguraion ermittelt\\\\

\noindent Die Variable $<countOfComponents>$ wird vor der Prüfung auf die
Auswahlkriterium immmer angepasst. Die Ausgew\"ahlte Komponnete wird zuerst mit aktuellen
Konfiguration verglichen. \\\\
Wenn die ausgew\"ahlte Komponente nicht in der
bestehenden Konfiguration exestiert, wird $<countOfComponents>$ auf 1
inkrementiert. Somit wird tempor\"ar die ausgewählte Komponnte zu der aktuellen
Konfiguration hinzugefügt. Nach dem alle Pr\"ufungen erfolgreich abgelaufen wird
diese Komponnete zu der aktuellen Konfiguration hinzugefügt.\\\\
Wenn die ausgew\"ahlte Komponente in der aktuellen Konfiguration gefunden wird.
Das bedeutet, dass die Komponnete abgew\"ahlt wird und uas der Konfiguration
entfernt werden muss, deswegn wird $<countOfComponents>$ nicht ver\"andert.

\subsection{Hinweisfeld zu jeder Aktion}
Der Server liefert bei jedem Aktion die Erklärungen zu diesen Aktion, deswegen
bei dem Webclient sollte einen Bereich geben wo diese Information Präsentiert
werden kann.

\subsection{Auswahl der Komponente}

Der Server bekommt von dem Web-Client die ausgew\"ahlte Komponente.

\begin{enumerate}
    \item Die Komponente $<Vertex>$ aus der DB lesen. $<vComponent>$
    
    \item Alle ausgehende und eingehende Abh\"angigkeiten $<Edge>$ dieser
    Komponente aus DB lesen.
    
    \item Die Abh\"angigkeiten werden auf folgende Arten gefiltert:
    
    \begin{itemize}
        \item Die $<exclude>$ ausgehende Abh\"angigkeiten
        $<excludeDependenciesOut>$
        \item Die $<exclude>$ eingehende Abh\"angigkeiten
        $<excludeDependenciesIn>$
        \item Die $<require>$ ausgehende Abh\"angigkeiten
        $<requireDependenciesOut>$
        \item Die $<require>$ eingehende Abh\"angigkeiten
        $<requireDependenciesIn>$
    \end{itemize}
    
    \item Zu jede Abh\"angigkeit werden dazugeh\"orige abh\"qangige Komponente
    ermittelt.
    
    \item Der Vaterschritt der ausgew\"ahlten Komponente wird aus der DB
    abgefragt. $<vFatherStep>$
    
    \item Aus diesem Vaterschritt wird das Auswahlkriterium ausgelesen.
    $<selectionCriterium>$
    
    \item Der aktuelle Schritt wird aus der Aktuellen Konfiguration ebenso
    ausgelesen. $<currentStep>$
    
    \item Im aktuellem Schritt aus der aktuellen Konfiguration wird gepr\"uft,
    ob die ausgew\"ahlte Komponnte in vorherigen Aktionen ausgew\"ahlt war.
    Ausf\"uhrende Funktion $<checkSelectedComponent(currentStep,componentId)>$
    
    \begin{itemize}
        \item JA $->$ Die Komponente aus der aktuellen Konfiguration wird
        gel\"oscht. Der Status ist $<RemovedComponent>$
        Wenn die zu l\"oschende Komponente die Abh\"angigkeiten hat, werden
        diese dementsprechend der Regel behandelt.
        \item NEIN $->$ Der Status ist $<AddedComponent>$
    \end{itemize}
    
    \item Nachdem die aktuelle Konfiguration konsistent ist, werden
    alle vorher ausgew\"ahlte Komponente des Schrittes aus der
    aktuellen Konfiguration ausgelesen. $<previousSelectedComponents>$
    
    \item Die definierte Auswahlkriterium im Vaterschritt wird mit dem vorher
    ausgew\"ahlten Komponenten verglichen und nach der Regeln der
    Auswahlkriterium wird die aktuell ausgew\"ahlte Komponente entweder zu der
    aktuellen Konfiguration hizugef\"ugt oder nicht hinzugef\"ugt.
    Ausf\"uhrende Funktion $<checkSelectionCriterium(previousSelectedComponents.size, selectionCriterium, statusSelectedComponent)>$
    
    \item Danach wird geschaut ob die ausgew\"ahlte KOmponente von einem anderen
    Komponente ausgeschlossen wird.
    Ausf\"uhrende Funktion $<checkExcludeDependencies(currentStep.get, excludeDependenciesIn)>$
    
    \item Als nächstes wird geschaut ob die Komponente n\"achsten Schritt hat.
    Ausf\"uhrende Funktion $<checkNextStepExistence(vComponent)>$
    
    \item Der allgemeiner Status wird zurzeit auf erfolgreich gesetzt.
    
    \item Alle erreichen Status werden zu der $<StatusComponent>$ hinzugef\"ugt.
    
    \item Alle Abhengigkeiten von $<requireDependenciesOut>$ und
    $<excludeDependenciesOut>$ zu eier Liste hinzugef\"ugt.
    
    \item Danach wird mit Abh\"angigkeit des Statuses die $<ComponentOut>$
    zusammengesetzt
    
\end{enumerate}




\end{document}
